<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Slideshow Studio - Professional Video Generator</title>
    <!-- Google Fonts - Enhanced Modern Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Quicksand:wght@400;500;600;700&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Sortable.js for drag and drop functionality -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='enhanced-style.css') }}"
    />
    <script src="https://unpkg.com/heroicons@1.0.6/outline"></script>    <script>
      tailwind.config = {
        theme: {
          fontFamily: {
            'sans': ['Plus Jakarta Sans', 'Inter', 'system-ui', 'sans-serif'],
            'display': ['Poppins', 'system-ui', 'sans-serif'],
            'modern': ['Manrope', 'system-ui', 'sans-serif'],
            'rounded': ['Quicksand', 'system-ui', 'sans-serif'],
          },
          extend: {
            colors: {
              primary: {
                50: "#f0f9ff",
                100: "#e0f4fe",
                200: "#bae8fd",
                300: "#7dd5f8",
                400: "#38bef0",
                500: "#0eaae4",
                600: "#0299d1",
                700: "#0381b1",
                800: "#066c88",
                900: "#0a526b",
              },
              pastel: {
                blue: "#a8d5ff",
                teal: "#98e1d9",
                indigo: "#c7d2fe",
                purple: "#d8b4fe",
                lavender: "#e2d9f3",
                pink: "#ffd6e8",
                rose: "#ffccd5",
                peach: "#ffddc7",
                orange: "#ffd8a8",
                yellow: "#fef3c7",
                mint: "#c1f0d9",
                sage: "#d1e7dd",                green: "#b8e3cb",
                yellow: "#ffeaa7",
                pink: "#ffcadb",
                purple: "#d0bfff",
                gray: "#e5e7eb",
                slate: "#f1f5f9",
                indigo: "#c7d2fe",
                rose: "#fecdd3",
              }
            },
            boxShadow: {
              'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.1)',
              'glow': '0 0 15px rgba(66, 153, 225, 0.5)',
              'pastel': '0 4px 15px -3px rgba(158, 207, 255, 0.4)',
              'card': '0 10px 20px -5px rgba(214, 222, 255, 0.3)',
              'button': '0 5px 12px -2px rgba(105, 175, 245, 0.3)',
              '3d': '0 8px 0 -3px rgba(214, 222, 255, 0.7)',
            },
            borderRadius: {
              'xl': '1rem',
              '2xl': '1.5rem', 
              '3xl': '2rem',
              '4xl': '2.5rem',
              'pill': '9999px',
            },
            animation: {
              'gradient': 'gradient 8s ease infinite',
              'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'float': 'float 3s ease-in-out infinite',
            },
            keyframes: {
              gradient: {
                '0%, 100%': { backgroundPosition: '0% 50%' },
                '50%': { backgroundPosition: '100% 50%' },
              },
              float: {
                '0%, 100%': { transform: 'translateY(0)' },
                '50%': { transform: 'translateY(-10px)' },
              },
            }
          },
        },
      };</script>    <style>
      /* Base styles */
      body {
        font-family: 'Plus Jakarta Sans', sans-serif;
        color: #334155;
        background-color: #f9faff;
        background-image: linear-gradient(to bottom, #f9faff, #f0f5ff, #f9faff);
        min-height: 100vh;
      }

      h1, h2, h3, h4, h5, h6 {
        font-family: 'Poppins', sans-serif;
      }
        /* Modern navigation styles */
      .nav-item {
        padding: 0.75rem 1.25rem;
        border-radius: 1rem;
        color: #4b5563;
        font-weight: 500;
        display: flex;
        align-items: center;
        transition: all 0.3s ease;
        font-family: 'Inter', sans-serif;
        margin: 0 0.25rem;
        position: relative;
        overflow: hidden;
      }
      
      .nav-item:hover {
        background-color: rgba(66, 153, 225, 0.1);
        color: #0292d1;
        transform: translateY(-2px);
        box-shadow: 0 3px 10px -3px rgba(13, 148, 218, 0.2);
      }
      
      .nav-item.active {
        background: linear-gradient(135deg, #38bef0 0%, #0292d1 100%);
        color: white;
        box-shadow: 0 5px 15px -3px rgba(14, 165, 233, 0.35);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }      /* Modern step indicator styles */
      .step-indicator {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 3rem;
        height: 3rem;
        border-radius: 9999px;
        font-size: 1rem;
        font-weight: 600;
        box-shadow: 0 6px 12px -2px rgba(0, 0, 0, 0.1), 0 3px 6px -2px rgba(0, 0, 0, 0.05);
        transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        font-family: 'Quicksand', sans-serif;
        position: relative;
        z-index: 1;
      }
      
      .step-active {
        background: linear-gradient(135deg, #38bef0 0%, #0292d1 100%);
        color: white;
        transform: scale(1.08);
        box-shadow: 0 10px 20px -5px rgba(14, 165, 233, 0.4);
        animation: pulse-blue 1.5s infinite;
      }
      
      .step-complete {
        background: linear-gradient(135deg, #34d399 0%, #059669 100%);
        color: white;
        box-shadow: 0 6px 15px -3px rgba(5, 150, 105, 0.4);
      }
      
      .step-inactive {
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        color: #64748b;
        border: 1px solid #e2e8f0;
      }
        /* Connector line between steps */
      .step-connector {
        height: 3px;
        background: linear-gradient(to right, #e2e8f0, #a8d5ff, #e2e8f0);
        transition: all 0.5s ease;
        border-radius: 999px;
        box-shadow: 0 1px 2px rgba(14, 165, 233, 0.1);
        position: relative;
        overflow: hidden;
      }
      
      .step-connector::after {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.8), transparent);
        animation: shimmer 2s infinite;
      }
      
      @keyframes shimmer {
        100% {
          left: 100%;
        }      }
      
      .text-shadow-drop {
        text-shadow: 2px 4px 6px rgba(0, 0, 0, 0.6);
        transform: translateY(2px);
        transition: all 0.3s ease;
      }
      
      .text-shadow-drop:hover {
        transform: translateY(-1px);
        text-shadow: 3px 6px 10px rgba(0, 0, 0, 0.4);
      }

      .text-outline {
        -webkit-text-stroke: 1.5px black;
        text-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
      }      /* Enhanced pulse animation for timing settings */
      @keyframes pulse-blue {
        0% {
          box-shadow: 0 0 0 0 rgba(14, 162, 228, 0.6);
          background-color: rgba(219, 234, 254, 0.8);
        }
        50% {
          box-shadow: 0 0 0 12px rgba(14, 162, 228, 0.2);
          background-color: rgba(191, 219, 254, 0.9);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(14, 162, 228, 0);
          background-color: rgba(219, 234, 254, 0.8);
        }
      }
      
      .pulse-animation {
        animation: pulse-blue 1s ease-out;
        border-color: #0ea2e4;
        transition: all 0.3s ease;
      }
      
      /* Improved range slider styles */
      input[type="range"] {
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        height: 6px;
        border-radius: 8px;
        background: linear-gradient(to right, #3b82f6 0%, #93c5fd 100%);
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
      }
      
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #fff;
        box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        border: 2px solid #3b82f6;
        transition: all 0.2s ease;
      }
      
      input[type="range"]::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #fff;
        box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        border: 2px solid #3b82f6;
        transition: all 0.2s ease;
      }
      
      input[type="range"]::-webkit-slider-thumb:hover {
        background: #dbeafe;
        transform: scale(1.1);
      }
      
      input[type="range"]::-moz-range-thumb:hover {
        background: #dbeafe;
        transform: scale(1.1);
      }
      
      input[type="range"]:focus {
        outline: none;
      }
      
      /* Value bubble for sliders */
      .slider-container {
        position: relative;
      }
        /* Value update animation */
      @keyframes highlight-value {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.15);
          opacity: 0.9;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
        .value-updated {
        animation: highlight-value 0.5s ease-out;
      }
      
      /* Hover effect for timing setting cards */
      .timing-card {
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      }
      
      .timing-card:hover {
        box-shadow: 0 15px 30px rgba(0,0,0,0.1), 0 10px 10px rgba(0,0,0,0.05);
        transform: translateY(-5px);
      }
      
      /* Custom styling for cards and containers */
      .app-card {
        background-color: white;
        border-radius: 1rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
        border: 1px solid rgba(226, 232, 240, 0.6);
        overflow: hidden;
      }
      
      .app-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        border-color: rgba(14, 162, 228, 0.3);
      }
        .gradient-heading {
        background: linear-gradient(135deg, #0ea2e4 0%, #6366f1 100%);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        color: transparent;
      }
        /* Modern form controls */
      .form-input {
        border-radius: 0.8rem;
        border: 2px solid #e2e8f0;
        padding: 0.85rem 1.25rem;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-family: 'Inter', sans-serif;
        box-shadow: 0 2px 6px -2px rgba(14, 162, 228, 0.06);
        background-color: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(8px);
      }
      
      .form-input:focus {
        border-color: #38bef0;
        box-shadow: 0 0 0 4px rgba(56, 190, 240, 0.15);
        background-color: white;
        transform: translateY(-1px);
      }
      
      .form-button {
        border-radius: 1rem;
        padding: 0.85rem 1.75rem;
        font-weight: 600;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        background: linear-gradient(135deg, #38bef0 0%, #0292d1 100%);
        background-size: 200% 100%;
        background-position: 0 0;
        color: white;
        box-shadow: 0 8px 15px -4px rgba(14, 162, 228, 0.4);
        letter-spacing: 0.01em;
        position: relative;
        overflow: hidden;
        z-index: 1;
      }
      
      .form-button::after {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,0.2), rgba(255,255,255,0));
        transition: all 0.5s ease;
        z-index: -1;
      }
      
      .form-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 20px -5px rgba(14, 162, 228, 0.5);
        background-position: 100% 0;
      }
      
      .form-button:hover::after {
        left: 100%;
      }
      
      .form-button:active {
        transform: translateY(0);
      }
        /* Custom styling for range sliders */
      input[type=range] {
        height: 12px;
        background: linear-gradient(to right, #e0f4fe, #bae8fd);
        border-radius: 10px;
        border: 1px solid #e2e8f0;
        cursor: pointer;
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
        margin: 10px 0;
        position: relative;
      }
      
      input[type=range]::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: var(--value-percent, 50%);
        height: 100%;
        background: linear-gradient(to right, #bae8fd, #38bef0);
        border-radius: 10px 0 0 10px;
        z-index: 1;
      }
      
      input[type=range]::-webkit-slider-thumb {
        -webkit-appearance: none;
        background: linear-gradient(135deg, #38bef0 0%, #0292d1 100%);
        cursor: pointer;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        z-index: 2;
        margin-top: -6px;
      }
      
      input[type=range]::-webkit-slider-thumb:hover {
        transform: scale(1.2);
        box-shadow: 0 0 15px rgba(14, 162, 228, 0.4);
      }
      
      input[type=range]:active::-webkit-slider-thumb {
        transform: scale(1.1);
        background: linear-gradient(135deg, #0ea2e4 0%, #0181b8 100%);
      }
        .text-3d {
        text-shadow: 0px 1px 0px #c0c0c0,
                     0px 2px 0px #b0b0b0,
                     0px 3px 0px #a0a0a0,
                     0px 4px 0px #909090,
                     0px 5px 10px rgba(0, 0, 0, 0.6);
        transform: perspective(500px) rotateX(10deg);
        transform-style: preserve-3d;
      }
      
      .text-neon {
        text-shadow: 0 0 5px #fff, 
                    0 0 10px #fff, 
                    0 0 15px #0073e6, 
                    0 0 20px #0073e6, 
                    0 0 25px #0073e6, 
                    0 0 30px #0073e6, 
                    0 0 35px #0073e6;
        animation: neon-pulse 1.5s ease-in-out infinite alternate;
      }
      
      @keyframes neon-pulse {
        from {
          text-shadow: 0 0 5px #fff, 
                      0 0 10px #fff, 
                      0 0 15px #0073e6, 
                      0 0 20px #0073e6;
        }
        to {
          text-shadow: 0 0 5px #fff, 
                      0 0 10px #fff, 
                      0 0 15px #0073e6, 
                      0 0 20px #0073e6, 
                      0 0 25px #0073e6,
                      0 0 30px #0073e6,
                      0 0 35px #0073e6;
        }
      }
        .text-retro {
        text-shadow: 3px 3px 0 #ff0000,
                    -3px -3px 0 #00ff00;
        animation: retro-shift 3s ease-in-out infinite alternate;
      }
      
      @keyframes retro-shift {
        0% {
          text-shadow: 3px 3px 0 #ff0000,
                     -3px -3px 0 #00ff00;
        }
        50% {
          text-shadow: 3px 3px 0 #0051ff,
                     -3px -3px 0 #ff9900;
        }
        100% {
          text-shadow: 3px 3px 0 #ff00dd,
                     -3px -3px 0 #00ffea;
        }
      }
      
      /* Behind person effect highlights */
      .highlight-option {
        border-color: #3b82f6;
        background-color: #eff6ff;      }

      /* Make image options selectable */
      .image-option {
        transition: all 0.2s ease-in-out;
      }

      .image-option:hover {
        transform: scale(1.05);
      }
      
      .image-option.ring-2 {
        border: 2px solid #3b82f6;
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <!-- Modern navbar -->
    <nav class="bg-white shadow-sm border-b border-gray-200 py-3">
      <div class="container mx-auto px-4 flex justify-between items-center">
        <div class="flex items-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-8 w-8 text-blue-600"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
            />
          </svg>
          <span class="ml-2 text-xl font-bold text-gray-800"
            >Slideshow Studio</span
          >
        </div>
        <div class="hidden md:flex space-x-1">
          <a href="#" class="nav-item active">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 mr-1"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
              />
            </svg>
            Create
          </a>
          <a href="#" class="nav-item">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 mr-1"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
              />
            </svg>
            Gallery
          </a>
          <a href="#" class="nav-item">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 mr-1"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"
              />
            </svg>
            Settings
          </a>
        </div>
      </div>
    </nav>    <!-- Main content -->
    <div class="container mx-auto px-4 py-8 max-w-5xl">      <!-- Video Creation Content -->
      <div id="video-creation-content">
        <!-- Steps indicator -->
        <div class="mb-10">
          <div class="flex items-center justify-center">
            <div class="flex flex-col items-center">
              <div class="step-indicator step-active">1</div>
              <span class="text-xs font-medium text-blue-600 mt-2">Upload</span>
            </div>
            <div class="w-12 h-1 bg-gray-200 mx-2"></div>
            <div class="flex flex-col items-center">
              <div class="step-indicator step-inactive">2</div>
              <span class="text-xs font-medium text-gray-500 mt-2"
                >Configure</span
              >
            </div>
            <div class="w-12 h-1 bg-gray-200 mx-2"></div>
            <div class="flex flex-col items-center">
              <div class="step-indicator step-inactive">3</div>
              <span class="text-xs font-medium text-gray-500 mt-2">Generate</span>
            </div>
          </div>
        </div>

        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">
          Create Your Slideshow
        </h1>
        <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">
          Upload your images, add audio, and create a professional slideshow in
          minutes. Choose from 4K or Instagram Reel formats.
        </p>

        <!-- Upload Method Selection -->
        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl shadow-md border border-blue-100 mb-6 hover:shadow-lg transition-all relative overflow-hidden">
          <!-- Decorative elements -->
          <div class="absolute w-20 h-20 rounded-full bg-blue-200 opacity-20 -bottom-10 -left-10"></div>
          <div class="absolute w-16 h-16 rounded-full bg-indigo-200 opacity-20 -top-8 -right-8"></div>
          <div class="absolute w-4 h-4 rounded-full bg-blue-400 opacity-20 top-8 right-12 animate-pulse"></div>
          
          <div class="flex items-center mb-4">
            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold shadow-md">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
              </svg>
            </div>
            <h2 class="ml-4 text-xl font-bold text-gray-800">Select Image Upload Method</h2>
          </div>
          
          <div class="bg-white p-4 rounded-lg shadow-inner mb-5 border border-gray-100">
            <div class="flex space-x-4 mb-4">
              <div class="flex items-center">
                <input
                  type="radio"
                  id="individual"
                  name="upload-method"
                  value="individual"
                  checked
                  onchange="toggleUploadMethod()"
                  class="h-4 w-4 text-blue-600 focus:ring-blue-500"
                />
                <label for="individual" class="ml-2 text-gray-700 font-medium"
                  >Upload Individual Images</label
                >
              </div>

              <div class="flex items-center">
                <input
                  type="radio"
                  id="directory"
                  name="upload-method"
                  value="directory"
                  onchange="toggleUploadMethod()"
                  class="h-4 w-4 text-blue-600 focus:ring-blue-500"
                />
                <label for="directory" class="ml-2 text-gray-700 font-medium"
                  >Upload Directory</label
                >
              </div>
            </div>

            <!-- Individual Upload -->
            <div
              id="individual-upload"
              class="rounded-md p-4 bg-gradient-to-br from-white to-blue-50 shadow-inner border border-blue-100"
              style="display: block"
            >
              <form
                action="/upload"
                method="POST"
                enctype="multipart/form-data"
                class="space-y-4"
              >
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2 flex items-center"
                    ><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>Select Images:</label
                  >
                  <input
                    type="file"
                    name="file"
                    multiple
                    accept="image/*"
                    class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-blue-500 file:to-indigo-600 file:text-white hover:file:from-blue-600 hover:file:to-indigo-700 file:shadow file:transition-all"
                  />
                </div>
                <button
                  type="submit"
                  class="px-5 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all shadow-md hover:shadow-lg flex items-center"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                  </svg>
                  Upload Images
                </button>
              </form>
            </div>

            <!-- Directory Upload -->
            <div
              id="directory-upload"
              class="rounded-md p-4 bg-gradient-to-br from-white to-indigo-50 shadow-inner border border-indigo-100"
              style="display: none"
            >
              <form
                action="/upload_directory"
                method="POST"
                enctype="multipart/form-data"
                class="space-y-4"
              >
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2 flex items-center"
                    ><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-indigo-600 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                    </svg>Select Directory:</label
                  >
                  <input
                    type="file"
                    name="directory"
                    webkitdirectory
                    directory
                    multiple
                    class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-indigo-500 file:to-purple-600 file:text-white hover:file:from-indigo-600 hover:file:to-purple-700 file:shadow file:transition-all"
                  />
                </div>
                <button
                  type="submit"
                  class="px-5 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all shadow-md hover:shadow-lg flex items-center"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                  </svg>
                  Upload Directory
                </button>
              </form>
            </div>
          </div>
          
          <!-- Helpful tip -->
          <div class="bg-yellow-50 p-3 rounded-lg border-l-4 border-yellow-400 mt-4">
            <div class="flex">
              <div class="flex-shrink-0">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                </svg>
              </div>
              <div class="ml-3">
                <p class="text-sm text-gray-700">
                  Choose individual uploads for selecting specific images or directory upload for processing all images in a folder at once.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Special Images Section -->
        <div class="bg-gradient-to-r from-teal-50 to-green-50 p-6 rounded-xl shadow-md border border-teal-100 mb-6 hover:shadow-lg transition-all relative overflow-hidden">
          <!-- Decorative elements -->
          <div class="absolute w-20 h-20 rounded-full bg-teal-200 opacity-20 -bottom-10 -left-10"></div>
          <div class="absolute w-16 h-16 rounded-full bg-green-200 opacity-20 -top-8 -right-8"></div>
          <div class="absolute w-4 h-4 rounded-full bg-teal-400 opacity-20 top-8 right-12 animate-pulse"></div>
          
          <div class="flex items-center mb-4">
            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gradient-to-r from-teal-500 to-green-500 flex items-center justify-center text-white font-bold shadow-md">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
              </svg>
            </div>
            <div>
              <h3 class="ml-4 text-xl font-bold text-gray-800">
                Special Images
                <span class="text-sm font-normal text-gray-500 ml-1">(Optional)</span>
              </h3>
            </div>
          </div>
          
          <div class="bg-white p-4 rounded-lg shadow-inner mb-4 border border-gray-100">
            <p class="text-gray-700 mb-4 flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-teal-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              These images will be used as the first and last images in your
              slideshow to create a professional intro and outro.
            </p>

            <form
              action="/upload_special"
              method="POST"
              enctype="multipart/form-data"
              class="space-y-4"
            >
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-gradient-to-br from-white to-teal-50 p-4 rounded-lg shadow-sm border border-teal-100">
                  <label
                    for="firstphoto"
                    class="block text-sm font-medium text-gray-800 mb-2 flex items-center"
                    ><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-teal-600 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                    </svg>First Image (firstphoto.jpg):</label
                  >
                  <div class="relative">
                    <input
                      type="file"
                      name="firstphoto"
                      id="firstphoto"
                      accept="image/*"
                      class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-teal-500 file:to-green-500 file:text-white hover:file:from-teal-600 hover:file:to-green-600 file:shadow file:transition-all"
                    />
                    <div class="mt-2 text-xs text-gray-600">Opening image of your slideshow</div>
                  </div>
                </div>

                <div class="bg-gradient-to-br from-white to-green-50 p-4 rounded-lg shadow-sm border border-green-100">
                  <label
                    for="endimage"
                    class="block text-sm font-medium text-gray-800 mb-2 flex items-center"
                    ><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                    </svg>Last Image (endimage.jpg):</label
                  >
                  <div class="relative">
                    <input
                      type="file"
                      name="endimage"
                      id="endimage"
                      accept="image/*"
                      class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-green-500 file:to-teal-500 file:text-white hover:file:from-green-600 hover:file:to-teal-600 file:shadow file:transition-all"
                    />
                    <div class="mt-2 text-xs text-gray-600">Closing image of your slideshow</div>
                  </div>
                </div>
              </div>

              <div class="mt-4 flex justify-end">
                <button
                  type="submit"
                  class="px-5 py-2.5 bg-gradient-to-r from-teal-500 to-green-500 hover:from-teal-600 hover:to-green-600 text-white font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all shadow-md hover:shadow-lg flex items-center"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                  </svg>
                  Upload Special Images
                </button>
              </div>
            </form>
          </div>
          
          <!-- Helpful tip -->
          <div class="bg-yellow-50 p-3 rounded-lg border-l-4 border-yellow-400 mt-2">
            <div class="flex">
              <div class="flex-shrink-0">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                </svg>
              </div>
              <div class="ml-3">
                <p class="text-sm text-gray-700">
                  Special images can include title cards, brand logos, or "subscribe" screens to professionalize your video.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Uploaded Images Gallery -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
          <h2 class="text-xl font-semibold mb-4">
            Uploaded Images
            <span class="text-sm font-normal text-gray-500"
              >(drag to reorder)</span
            >
          </h2>
          <div
            id="sortable-gallery"
            class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"
          >
            {% for image in images %}
            <div class="relative group cursor-move" data-image="{{ image }}">
              <div
                class="h-32 w-full flex items-center justify-center overflow-hidden rounded-md bg-gray-100"
              >
                <img
                  src="{{ url_for('uploaded_file', filename=image) }}"
                  alt="{{ image }}"
                  class="max-h-full max-w-full object-contain rounded-md"
                />
              </div>
              <div
                class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all rounded-md flex items-center justify-center"
              >
                <a
                  href="/delete/{{ image }}"
                  class="opacity-0 group-hover:opacity-100 bg-red-500 text-white px-2 py-1 rounded-md text-xs hover:bg-red-600"
                  >Delete</a
                >
              </div>
              {% if image == 'firstphoto.jpg' %}
              <span
                class="absolute top-1 left-1 bg-green-500 text-white text-xs px-2 py-1 rounded"
                >First</span
              >
              {% elif image == 'endimage.jpg' %}
              <span
                class="absolute top-1 left-1 bg-purple-500 text-white text-xs px-2 py-1 rounded"
                >Last</span
              >
              {% endif %}
            </div>
            {% endfor %}
          </div>
        </div>

        <!-- Audio Upload and Generation -->
        <div class="bg-gradient-to-r from-purple-50 to-violet-50 p-6 rounded-xl shadow-md border border-purple-100 mb-6 hover:shadow-lg transition-all relative overflow-hidden">
          <!-- Decorative elements -->
          <div class="absolute w-20 h-20 rounded-full bg-purple-200 opacity-20 -bottom-10 -left-10"></div>
          <div class="absolute w-16 h-16 rounded-full bg-violet-200 opacity-20 -top-8 -right-8"></div>
          <div class="absolute w-4 h-4 rounded-full bg-purple-400 opacity-20 top-8 right-12 animate-pulse"></div>
          
          <div class="flex items-center mb-4">
            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gradient-to-r from-purple-500 to-violet-500 flex items-center justify-center text-white font-bold shadow-md">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 001.414-7.072m-2.828 9.9a9 9 0 010-12.728" />
              </svg>
            </div>
            <h2 class="ml-4 text-xl font-bold text-gray-800">Audio Management</h2>
          </div>

          <div class="bg-white p-4 rounded-lg shadow-inner mb-4 border border-gray-100">
            <form
              method="POST"
              enctype="multipart/form-data"
              action="/generate"
              class="space-y-6"
            >
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-gradient-to-br from-white to-violet-50 p-4 rounded-lg shadow-sm border border-violet-100">
                  <label
                    for="speech"
                    class="block text-sm font-medium text-gray-800 mb-2 flex items-center"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-violet-600 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                    </svg>
                    Upload Speech MP3:
                  </label>
                  <input
                    type="file"
                    name="speech"
                    id="speech"
                    accept=".mp3"
                    class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-violet-500 file:to-purple-600 file:text-white hover:file:from-violet-600 hover:file:to-purple-700 file:shadow file:transition-all"
                  />
                  <p class="mt-2 text-xs text-gray-600 ml-1">
                    Add narration or voice-over to explain your content
                  </p>
                </div>
                
                <div class="bg-gradient-to-br from-white to-purple-50 p-4 rounded-lg shadow-sm border border-purple-100">
                  <label
                    for="background"
                    class="block text-sm font-medium text-gray-800 mb-2 flex items-center"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-purple-600 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
                    </svg>
                    Upload Background MP3:
                  </label>
                  <input
                    type="file"
                    name="background"
                    id="background"
                    accept=".mp3"
                    class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-purple-500 file:to-fuchsia-600 file:text-white hover:file:from-purple-600 hover:file:to-fuchsia-700 file:shadow file:transition-all"
                  />
                  <p class="mt-2 text-xs text-gray-600 ml-1">
                    Add musical soundtrack that will loop to match video length
                  </p>
                </div>
              </div>
              
              <!-- Helpful tip -->
              <div class="bg-yellow-50 p-3 rounded-lg border-l-4 border-yellow-400">
                <div class="flex">
                  <div class="flex-shrink-0">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm text-gray-700">
                      Adding both speech and background music? The application will automatically balance audio levels to ensure speech clarity.
                    </p>
                  </div>
                </div>
              </div>
            
            <!-- Video Settings -->
            <div class="mt-6">
              <div class="bg-gradient-to-r from-blue-50 to-sky-50 p-4 rounded-lg border border-blue-100 shadow-inner">
                <!-- Resolution Selection -->
                <h3 class="text-lg font-medium mb-3 flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z" />
                  </svg>
                  Select Video Resolution
                </h3>
                
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                  <div class="bg-white p-3 rounded-lg border border-blue-100 hover:shadow-md transition-all flex items-center">
                    <input
                      type="radio"
                      id="resolution4K"
                      name="resolution_type"
                      value="4K"
                      checked
                      class="h-4 w-4 text-blue-600 focus:ring-blue-500"
                    />
                    <label for="resolution4K" class="ml-2 text-gray-700 flex flex-col cursor-pointer">
                      <span class="font-medium">4K Video</span>
                      <span class="text-xs text-gray-500">16:9 Landscape (3840×2160)</span>
                    </label>
                  </div>
                  <div class="bg-white p-3 rounded-lg border border-blue-100 hover:shadow-md transition-all flex items-center">
                    <input
                      type="radio"
                      id="resolution4KVertical"
                      name="resolution_type"
                      value="4K_Vertical"
                      class="h-4 w-4 text-blue-600 focus:ring-blue-500"
                    />
                    <label for="resolution4KVertical" class="ml-2 text-gray-700 flex flex-col cursor-pointer">
                      <span class="font-medium">4K Vertical</span>
                      <span class="text-xs text-gray-500">9:16 Portrait (2160×3840)</span>
                    </label>
                  </div>
                  <div class="bg-white p-3 rounded-lg border border-blue-100 hover:shadow-md transition-all flex items-center">
                    <input
                      type="radio"
                      id="resolutionReel"
                      name="resolution_type"
                      value="Reel"
                      class="h-4 w-4 text-blue-600 focus:ring-blue-500"
                    />
                    <label for="resolutionReel" class="ml-2 text-gray-700 flex flex-col cursor-pointer">
                      <span class="font-medium">Instagram Reel</span>
                      <span class="text-xs text-gray-500">9:16 Standard (1080×1920)</span>
                    </label>
                  </div>
                </div>
                
                <p class="text-xs text-gray-500 mt-2">
                  Select 4K for standard landscape videos, 4K Vertical for high
                  definition vertical videos, or Instagram Reel for standard
                  vertical videos.
                </p>
              </div>
              
              <!-- Special Transitions for First and Last Images -->
              <div class="border-t pt-6 border-gray-200">
                <div class="bg-gradient-to-r from-indigo-50 to-purple-50 p-5 rounded-xl mb-5 border border-indigo-100 shadow-md hover:shadow-lg transition-all relative overflow-hidden">
                  <!-- Decorative elements -->
                  <div class="absolute w-20 h-20 rounded-full bg-indigo-200 opacity-20 -bottom-10 -left-10"></div>
                  <div class="absolute w-16 h-16 rounded-full bg-purple-200 opacity-20 -top-8 -right-8"></div>
                  <div class="absolute w-4 h-4 rounded-full bg-indigo-400 opacity-20 top-8 right-12 animate-pulse"></div>
                
                  <div class="flex items-center mb-4">
                    <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold shadow-md">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-6 w-6"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                        />
                      </svg>
                    </div>
                    <h3 class="ml-4 text-xl font-bold text-gray-800">Select Main Transition Effect</h3>
                  </div>
                  
                  <div class="bg-white p-4 rounded-lg shadow-inner mb-4 border border-gray-100">
                    <div class="flex flex-wrap items-center mb-4">
                      <div class="inline-flex items-center bg-gradient-to-br from-white to-indigo-50 rounded-full px-4 py-2 text-sm font-medium text-indigo-800 border border-indigo-100 shadow-sm mr-2 mb-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span>Professional Transitions</span>
                      </div>
                      <div class="inline-flex items-center bg-gradient-to-br from-white to-purple-50 rounded-full px-4 py-2 text-sm font-medium text-purple-800 border border-purple-100 shadow-sm mr-2 mb-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z" />
                        </svg>
                        <span>Multiple Categories</span>
                      </div>
                    </div>
                    
                    <select
                      name="transition_type"
                      id="transition_type"
                      class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 py-2 px-3 bg-gradient-to-r from-white to-indigo-50 transition-all border border-indigo-100"
                      style="height: 200px; size: 10;"
                    >
                      <optgroup label="Basic Transitions">
                        <option value="fade" selected>
                          Smooth Fade (Cross Dissolve)
                        </option>
                        <option value="smooth_cross_fade">Smooth Cross Fade</option>
                      </optgroup>

                      <optgroup label="Directional Wipes">
                        <option value="wipe_left">Wipe Left</option>
                        <option value="wipe_right">Wipe Right</option>
                        <option value="wipe_up">Wipe Up</option>
                        <option value="wipe_down">Wipe Down</option>
                        <option value="vertical_blinds">Vertical Blinds</option>
                      </optgroup>

                      <optgroup label="Zoom Effects">
                        <option value="zoom_in">Zoom In</option>
                        <option value="zoom_out">Zoom Out</option>
                        <option value="zoom_push">Zoom Push</option>
                        <option value="ken_burns">Ken Burns Effect</option>
                      </optgroup>

                      <optgroup label="Slide Transitions">
                        <option value="slide_left">Slide Left</option>
                        <option value="slide_right">Slide Right</option>
                        <option value="sliding_panels">Sliding Panels</option>
                        <option value="split_screen_slide">
                          Split Screen Slide
                        </option>
                      </optgroup>

                      <optgroup label="Creative Reveals">
                        <option value="circular_reveal">Circular Reveal</option>
                        <option value="vignette_fade">Vignette Fade</option>
                      </optgroup>

                      <optgroup label="Digital Effects">
                        <option value="pixelize">Pixelize</option>
                        <option value="gaussian_blur">Gaussian Blur</option>
                        <option value="glitch">Glitch Transition</option>
                        <option value="rgb_channel_shift">RGB Channel Shift</option>
                        <option value="prismatic_split">Prismatic Split</option>
                        <option value="edge_detection_blend">
                          Edge Detection Blend
                        </option>
                      </optgroup>

                      <optgroup label="Cinematic Effects">
                        <option value="film_burn">Film Burn</option>
                        <option value="film_grain_overlay">
                          Film Grain Overlay
                        </option>
                        <option value="whip_pan">Whip Pan</option>
                        <option value="cinematic_letterbox">
                          Cinematic Letterbox
                        </option>
                        <option value="colorize">Colorize Transition</option>
                      </optgroup>

                      <optgroup label="Dynamic Effects">
                        <option value="wave_distortion">Wave Distortion</option>
                        <option value="ripple">Ripple Effect</option>
                      </optgroup>

                      <optgroup label="Random">
                        <option value="random">Random (Different Each Time)</option>
                      </optgroup>
                    </select>
                    
                    <div class="mt-4 bg-indigo-50 p-3 rounded-lg border border-indigo-100">
                      <div class="flex items-center text-sm text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span class="font-medium">Pro Tip:</span>
                        <span class="ml-1">Choose a transition effect that complements your content style.</span>
                      </div>
                      <p class="text-xs text-gray-600 mt-2 ml-7">
                        Subtle transitions like "Smooth Fade" work well for professional presentations, while creative effects like "Film Burn" add cinematic flair to artistic content.
                      </p>
                    </div>
                  </div>
                  
                  <!-- First/Last Transition selectors -->
                  <div class="bg-white p-4 rounded-lg shadow-inner mb-4 border border-gray-100">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                      <!-- First Image Transition -->
                      <div>
                        <label for="first_transition" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-indigo-600 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 11l7-7 7 7M5 19l7-7 7 7" />
                          </svg>
                          First Image Transition
                        </label>
                        <select name="first_transition" id="first_transition" class="transition-selector block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 py-2 px-3 bg-gradient-to-r from-white to-blue-50 transition-all border border-blue-100">
                          <option value="">Same as Main Transition</option>
                          <optgroup label="Special Intros">
                            <option value="fade_in">Fade In</option>
                            <option value="slide_from_black">Slide from Black</option>
                            <option value="reveal_from_center">Reveal from Center</option>
                            <option value="zoom_in_slow">Zoom In (Slow)</option>
                            <option value="blur_reveal">Blur Reveal</option>
                            <option value="text_intro">Text Intro Overlay</option>
                          </optgroup>
                          <optgroup label="Standard">
                            <option value="fade">Smooth Fade</option>
                            <option value="wipe_right">Wipe Right</option>
                            <option value="zoom_in">Zoom In</option>
                            <option value="slide_up">Slide Up</option>
                          </optgroup>
                        </select>
                        <p class="text-xs text-gray-500 mt-1">Special effect for the first image in your slideshow</p>
                      </div>
                      
                      <!-- Last Image Transition -->
                      <div>
                        <label for="last_transition" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-purple-600 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 13l-7 7-7-7m14-8l-7 7-7-7" />
                          </svg>
                          Last Image Transition
                        </label>
                        <select name="last_transition" id="last_transition" class="transition-selector block w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 py-2 px-3 bg-gradient-to-r from-white to-purple-50 transition-all border border-purple-100">
                          <option value="">Same as Main Transition</option>
                          <optgroup label="Special Outros">
                            <option value="fade_out">Fade Out</option>
                            <option value="fade_to_black">Fade to Black</option>
                            <option value="zoom_out_slow">Zoom Out (Slow)</option>
                            <option value="blur_out">Blur Out</option>
                            <option value="vignette_close">Vignette Close</option>
                            <option value="credits_roll">Credits Roll</option>
                          </optgroup>
                          <optgroup label="Standard">
                            <option value="fade">Smooth Fade</option>
                            <option value="wipe_left">Wipe Left</option>
                            <option value="zoom_out">Zoom Out</option>
                            <option value="slide_down">Slide Down</option>
                          </optgroup>
                        </select>
                        <p class="text-xs text-gray-500 mt-1">Special effect for the last image in your slideshow</p>
                      </div>
                    </div>
                  </div>
                    <!-- Video Timing Settings Section -->
                  <div class="bg-white p-4 rounded-lg shadow-inner border border-gray-100">
                    <h3 class="text-lg font-medium mb-3 flex items-center">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      Video Timing Settings
                    </h3>
                    
                    <!-- Sliders in one row -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-5">
                      <!-- Frame Rate Slider -->
                      <div class="timing-card bg-gradient-to-r from-white to-blue-50 p-4 rounded-lg border border-blue-100">
                        <div class="flex justify-between items-center mb-2">
                          <label for="frame_rate_slider" class="block text-sm font-medium text-gray-700">
                            Frame Rate
                          </label>
                          <span class="value-display bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-semibold">
                            <span id="frame_rate_value">60</span> fps
                          </span>
                        </div>
                        
                        <div class="slider-container">
                          <input 
                            type="range" 
                            id="frame_rate_slider" 
                            name="frame_rate" 
                            min="24" 
                            max="120" 
                            value="60" 
                            class="w-full"
                            oninput="updateFrameRate(this.value)"
                          >
                          <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>24</span>
                            <span>60</span>
                            <span>120</span>
                          </div>
                        </div>
                        
                        <p class="text-xs text-gray-500 mt-2">
                          Higher frame rates = smoother video
                        </p>
                      </div>
                      
                      <!-- Image Duration Slider -->
                      <div class="timing-card bg-gradient-to-r from-white to-green-50 p-4 rounded-lg border border-green-100">
                        <div class="flex justify-between items-center mb-2">
                          <label for="image_display_duration_slider" class="block text-sm font-medium text-gray-700">
                            Image Duration
                          </label>
                          <span class="value-display bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-semibold">
                            <span id="image_display_duration_value">1.0</span> sec
                          </span>
                        </div>
                        
                        <div class="slider-container">
                          <input 
                            type="range" 
                            id="image_display_duration_slider" 
                            name="image_display_duration" 
                            min="500" 
                            max="5000" 
                            step="100" 
                            value="1000" 
                            class="w-full"
                            oninput="updateImageDuration(this.value)"
                          >
                          <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>0.5s</span>
                            <span>3s</span>
                            <span>5s</span>
                          </div>
                        </div>
                        
                        <p class="text-xs text-gray-500 mt-2">
                          Time each image is displayed
                        </p>
                      </div>
                      
                      <!-- Transition Duration Slider -->
                      <div class="timing-card bg-gradient-to-r from-white to-purple-50 p-4 rounded-lg border border-purple-100">
                        <div class="flex justify-between items-center mb-2">
                          <label for="transition_duration_slider" class="block text-sm font-medium text-gray-700">
                            Transition Duration
                          </label>
                          <span class="value-display bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-semibold">
                            <span id="transition_duration_value">60</span> fr
                          </span>
                        </div>
                        
                        <div class="slider-container">
                          <input 
                            type="range" 
                            id="transition_duration_slider" 
                            name="transition_duration" 
                            min="15" 
                            max="120" 
                            value="60" 
                            class="w-full"
                            oninput="updateTransitionDuration(this.value)"
                          >
                          <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>Fast</span>
                            <span>Med</span>
                            <span>Slow</span>
                          </div>
                        </div>
                        
                        <p class="text-xs text-gray-500 mt-2">
                          Duration of transitions in frames
                        </p>
                      </div>
                    </div>
                      <!-- Reset button -->
                    <div class="text-center">
                      <button 
                        type="button"
                        class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                        onclick="restoreDefaultTimingSettings()"
                      >
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                        </svg>
                        Reset to Default
                      </button>
                    </div>
                    
                    <!-- Summary Display -->
                    <div class="mt-4 bg-gray-50 p-3 rounded-lg border border-gray-200">
                      <h4 class="text-sm font-medium text-gray-700 mb-1">Current Settings Summary:</h4>
                      <div class="flex flex-wrap gap-3">
                        <span class="inline-flex items-center bg-white px-2.5 py-1 rounded-full text-xs font-medium text-gray-700 border border-gray-300">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                          </svg>
                          <span id="summary_frame_rate">60 fps</span>
                        </span>
                        <span class="inline-flex items-center bg-white px-2.5 py-1 rounded-full text-xs font-medium text-gray-700 border border-gray-300">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                          <span id="summary_image_duration">1.0 sec per image</span>
                        </span>
                        <span class="inline-flex items-center bg-white px-2.5 py-1 rounded-full text-xs font-medium text-gray-700 border border-gray-300">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                          </svg>
                          <span id="summary_transition_duration">60 frames transition</span>
                        </span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Watermark Section -->
                <div class="border-t pt-6 border-gray-200">
                  <div class="bg-gradient-to-r from-orange-50 to-amber-50 p-5 rounded-xl mb-5 border border-orange-100 shadow-md hover:shadow-lg transition-all relative overflow-hidden">
                    <!-- Decorative elements -->
                    <div class="absolute w-20 h-20 rounded-full bg-orange-200 opacity-20 -bottom-10 -left-10"></div>
                    <div class="absolute w-16 h-16 rounded-full bg-amber-200 opacity-20 -top-8 -right-8"></div>
                    <div class="absolute w-4 h-4 rounded-full bg-orange-400 opacity-20 top-8 right-12 animate-pulse"></div>
                  
                    <div class="flex items-center mb-4">
                      <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gradient-to-r from-orange-500 to-amber-500 flex items-center justify-center text-white font-bold shadow-md">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
                        </svg>
                      </div>
                      <h3 class="ml-4 text-xl font-bold text-gray-800">Watermark Settings</h3>
                    </div>
                    
                    <!-- Enable Watermark Checkbox -->
                    <div class="bg-white p-4 rounded-lg shadow-inner mb-4 border border-gray-100">
                      <div class="flex items-center mb-4">
                        <input 
                          type="checkbox" 
                          id="enable_watermark" 
                          name="enable_watermark" 
                          class="h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"
                          onchange="toggleWatermarkOptions()"
                        >
                        <label for="enable_watermark" class="ml-2 text-sm font-medium text-gray-700">
                          Enable Watermark
                        </label>
                      </div>
                      
                      <!-- Watermark Options (Hidden by default) -->
                      <div id="watermark_options" style="display: none;">
                        <!-- Watermark Selection -->
                        <div class="mb-4">
                          <label for="watermark_path" class="block text-sm font-medium text-gray-700 mb-2">
                            Select Watermark:
                          </label>                          <select 
                            name="watermark_path" 
                            id="watermark_path" 
                            class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 focus:ring-opacity-50 py-2 px-3 bg-gradient-to-r from-white to-orange-50 transition-all border border-orange-100"
                            onchange="updateWatermarkPreview()"
                          >
                            {% for watermark_path, watermark_name in watermark_files %}
                            <option value="{{ watermark_path }}">{{ watermark_name }}</option>
                            {% endfor %}
                          </select>
                        </div>
                        
                        <!-- Upload Custom Watermark -->
                        <div class="mb-4 bg-gradient-to-r from-white to-amber-50 p-3 rounded-lg border border-amber-100">
                          <label class="block text-sm font-medium text-gray-700 mb-2">
                            Upload Custom Watermark:
                          </label>
                          <div class="flex items-center space-x-2">
                            <input 
                              type="file" 
                              id="watermark_file_input" 
                              accept="image/png,image/jpg,image/jpeg" 
                              class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-orange-500 file:to-amber-500 file:text-white hover:file:from-orange-600 hover:file:to-amber-600 file:shadow file:transition-all"
                            >
                            <button 
                              type="button" 
                              onclick="uploadWatermark()" 
                              class="px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 text-white text-sm font-medium rounded-lg hover:from-orange-600 hover:to-amber-600 focus:outline-none focus:ring-2 focus:ring-orange-300 transition-all"
                            >
                              Upload
                            </button>
                          </div>
                          <div id="watermark_upload_status" class="text-xs mt-1" style="display: none;"></div>
                        </div>
                        
                        <!-- Position Selection -->
                        <div class="mb-4">
                          <label class="block text-sm font-medium text-gray-700 mb-2">
                            Watermark Position:
                          </label>
                          <div class="grid grid-cols-3 gap-2 mb-3">
                            <!-- Top Row -->
                            <label class="flex items-center justify-center p-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-orange-50 transition-all">
                              <input type="radio" name="watermark_position" value="top-left" class="sr-only">
                              <span class="text-xs font-medium">Top Left</span>
                            </label>
                            <label class="flex items-center justify-center p-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-orange-50 transition-all">
                              <input type="radio" name="watermark_position" value="top-center" class="sr-only">
                              <span class="text-xs font-medium">Top Center</span>
                            </label>
                            <label class="flex items-center justify-center p-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-orange-50 transition-all">
                              <input type="radio" name="watermark_position" value="top-right" class="sr-only">
                              <span class="text-xs font-medium">Top Right</span>
                            </label>
                            
                            <!-- Middle Row -->
                            <label class="flex items-center justify-center p-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-orange-50 transition-all">
                              <input type="radio" name="watermark_position" value="center-left" class="sr-only">
                              <span class="text-xs font-medium">Center Left</span>
                            </label>
                            <label class="flex items-center justify-center p-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-orange-50 transition-all">
                              <input type="radio" name="watermark_position" value="center" class="sr-only">
                              <span class="text-xs font-medium">Center</span>
                            </label>
                            <label class="flex items-center justify-center p-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-orange-50 transition-all">
                              <input type="radio" name="watermark_position" value="center-right" class="sr-only">
                              <span class="text-xs font-medium">Center Right</span>
                            </label>
                            
                            <!-- Bottom Row -->
                            <label class="flex items-center justify-center p-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-orange-50 transition-all">
                              <input type="radio" name="watermark_position" value="bottom-left" class="sr-only">
                              <span class="text-xs font-medium">Bottom Left</span>
                            </label>
                            <label class="flex items-center justify-center p-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-orange-50 transition-all">
                              <input type="radio" name="watermark_position" value="bottom-center" class="sr-only">
                              <span class="text-xs font-medium">Bottom Center</span>
                            </label>
                            <label class="flex items-center justify-center p-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-orange-50 transition-all">
                              <input type="radio" name="watermark_position" value="bottom-right" class="sr-only" checked>
                              <span class="text-xs font-medium">Bottom Right</span>
                            </label>
                          </div>
                          
                          <!-- Custom Position Option -->
                          <div class="mt-3">
                            <label class="flex items-center p-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-orange-50 transition-all">
                              <input type="radio" id="pos_custom" name="watermark_position" value="custom" class="mr-2">
                              <span class="text-xs font-medium">Custom Position (Use Sliders)</span>
                            </label>
                          </div>
                        </div>
                        
                        <!-- Custom Position Controls -->
                        <div id="custom_position_controls" class="mb-4 grid grid-cols-2 gap-4" style="display: none;">
                          <div>
                            <label for="custom_pos_x" class="block text-sm font-medium text-gray-700 mb-1">
                              X Position: <span id="pos_x_value">50</span>%
                            </label>
                            <input 
                              type="range" 
                              id="custom_pos_x" 
                              min="0" 
                              max="100" 
                              value="50" 
                              class="w-full"
                              oninput="document.getElementById('pos_x_value').textContent = this.value; updateWatermarkPreview();"
                            >
                            <input type="hidden" id="custom_pos_x_input" name="custom_pos_x" value="50">
                          </div>
                          <div>
                            <label for="custom_pos_y" class="block text-sm font-medium text-gray-700 mb-1">
                              Y Position: <span id="pos_y_value">50</span>%
                            </label>
                            <input 
                              type="range" 
                              id="custom_pos_y" 
                              min="0" 
                              max="100" 
                              value="50" 
                              class="w-full"
                              oninput="document.getElementById('pos_y_value').textContent = this.value; updateWatermarkPreview();"
                            >
                            <input type="hidden" id="custom_pos_y_input" name="custom_pos_y" value="50">
                          </div>
                        </div>
                        
                        <!-- Opacity and Size Controls -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                          <!-- Opacity Control -->
                          <div>
                            <label for="watermark_opacity_slider" class="block text-sm font-medium text-gray-700 mb-1">
                              Opacity: <span id="opacity_value">70%</span>
                            </label>
                            <input 
                              type="range" 
                              id="watermark_opacity_slider" 
                              name="watermark_opacity" 
                              min="0.1" 
                              max="1.0" 
                              step="0.1" 
                              value="0.7" 
                              class="w-full"
                              oninput="updateOpacityValue(this.value)"
                            >
                          </div>
                          
                          <!-- Size Control -->
                          <div>
                            <div class="flex items-center justify-between mb-1">
                              <label class="block text-sm font-medium text-gray-700">
                                Size: <span id="size_value">Auto</span>
                              </label>
                              <button 
                                type="button" 
                                id="size_auto_btn"
                                onclick="setAutoSize()" 
                                class="px-2 py-1 bg-green-600 text-white text-xs rounded-md hover:bg-green-700 transition-all"
                              >
                                Auto
                              </button>
                            </div>
                            <input 
                              type="range" 
                              id="watermark_size_slider" 
                              min="5" 
                              max="50" 
                              value="20" 
                              class="w-full"
                              oninput="updateSizeValue(this.value)"
                            >
                            <input type="hidden" id="watermark_size" name="watermark_size" value="auto">
                          </div>
                        </div>
                        
                        <!-- Watermark Preview -->
                        <div class="mb-4">
                          <label class="block text-sm font-medium text-gray-700 mb-2">
                            Preview:
                          </label>
                          <div 
                            id="watermark_preview_container" 
                            class="relative bg-gray-100 border border-gray-300 rounded-lg overflow-hidden mx-auto"
                            style="width: 356px; height: 200px;"
                          >
                            <img 
                              id="watermark_preview_image" 
                              src="" 
                              alt="Watermark Preview" 
                              class="absolute"
                              style="display: none; max-width: 20%; height: auto;"
                            >
                            <div 
                              id="preview_placeholder_text" 
                              class="absolute inset-0 flex items-center justify-center text-gray-500 text-sm"
                            >
                              Select watermark to preview
                            </div>
                            <div 
                              id="preview_resolution_indicator" 
                              class="absolute top-2 left-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded"
                              style="display: none;"
                            >
                              4K (3840×2160)
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>            <!-- Enhanced Generate Button -->
            
            <!-- Final Settings Summary -->
            <div class="mt-8 mb-6 bg-white p-5 rounded-xl shadow-md border border-gray-200">
              <h3 class="text-lg font-medium text-gray-800 mb-3 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                </svg>
                Video Generation Settings Summary
              </h3>
              
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">
                <!-- Resolution Settings -->
                <div class="bg-gradient-to-r from-white to-blue-50 p-3 rounded-lg border border-blue-100">
                  <h4 class="text-sm font-medium text-gray-700 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z" />
                    </svg>
                    Resolution
                  </h4>
                  <div class="mt-1 flex items-center">
                    <div class="h-3 w-3 bg-blue-500 rounded-full mr-2"></div>
                    <p class="text-sm text-gray-600" id="resolution_summary">4K (3840×2160)</p>
                  </div>
                </div>
                
                <!-- Transition Settings -->
                <div class="bg-gradient-to-r from-white to-indigo-50 p-3 rounded-lg border border-indigo-100">
                  <h4 class="text-sm font-medium text-gray-700 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                    </svg>
                    Transitions
                  </h4>
                  <div class="mt-1 space-y-1">
                    <div class="flex items-center">
                      <div class="h-2 w-2 bg-indigo-500 rounded-full mr-2"></div>
                      <p class="text-xs text-gray-600">Main: <span id="main_transition_summary">Smooth Fade (Cross Dissolve)</span></p>
                    </div>
                    <div class="flex items-center">
                      <div class="h-2 w-2 bg-blue-500 rounded-full mr-2"></div>
                      <p class="text-xs text-gray-600">First: <span id="first_transition_summary">Same as Main</span></p>
                    </div>
                    <div class="flex items-center">
                      <div class="h-2 w-2 bg-purple-500 rounded-full mr-2"></div>
                      <p class="text-xs text-gray-600">Last: <span id="last_transition_summary">Same as Main</span></p>
                    </div>
                  </div>
                </div>
                
                <!-- Timing Settings -->
                <div class="bg-gradient-to-r from-white to-green-50 p-3 rounded-lg border border-green-100">
                  <h4 class="text-sm font-medium text-gray-700 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Timing
                  </h4>
                  <div class="mt-1 space-y-1">
                    <div class="flex items-center">
                      <div class="h-2 w-2 bg-blue-500 rounded-full mr-2"></div>
                      <p class="text-xs text-gray-600">Frame Rate: <span id="final_frame_rate">60 fps</span></p>
                    </div>
                    <div class="flex items-center">
                      <div class="h-2 w-2 bg-green-500 rounded-full mr-2"></div>
                      <p class="text-xs text-gray-600">Image Duration: <span id="final_image_duration">1.0 sec</span></p>
                    </div>
                    <div class="flex items-center">
                      <div class="h-2 w-2 bg-purple-500 rounded-full mr-2"></div>
                      <p class="text-xs text-gray-600">Transition: <span id="final_transition_duration">60 frames</span></p>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Additional Info -->
              <div class="flex items-center p-3 bg-blue-50 rounded-lg border border-blue-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <p class="text-sm text-gray-700">
                  Your video will be generated with these settings. Processing time may vary depending on the number of images and selected options.
                </p>
              </div>
            </div>
            
            <div class="mt-8 relative">
              <div class="absolute -inset-1 bg-gradient-to-r from-blue-600 via-indigo-500 to-purple-600 rounded-xl blur-md opacity-75 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-gradient"></div>
              <button
                type="submit"
                class="relative w-full px-8 py-5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold text-lg rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300 transform hover:scale-[1.02] hover:shadow-lg flex items-center justify-center shadow-xl"
              >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Generate Slideshow
              </button>
            </div>
          </form>        </div>      </div>
    </div>

    <!-- Footer -->
    <footer class="text-center text-gray-500 text-sm mt-8">
      <p>
        © Created by
        <a href="" target="_blank" class="text-blue-600 hover:underline"
          >Bhuvanesh</a
        >
      </p>
    </footer>
      <script>
        function toggleUploadMethod() {
          const individualMethod =
            document.getElementById("individual").checked;
          document.getElementById("individual-upload").style.display =
            individualMethod ? "block" : "none";
          document.getElementById("directory-upload").style.display =
            individualMethod ? "none" : "block";
        }

        function toggleWatermarkOptions() {
          const enableWatermark =
            document.getElementById("enable_watermark").checked;
          document.getElementById("watermark_options").style.display =
            enableWatermark ? "block" : "none";
        }
        function updateOpacityValue(value) {
          document.getElementById("opacity_value").innerText =
            Math.round(value * 100) + "%";
        }

        function updateSizeValue(value) {
          // Update the display value
          document.getElementById("size_value").innerText = value + "%";

          // Update the hidden input with the decimal value (e.g., 10% = 0.10)
          const decimalValue = parseFloat(value) / 100;
          document.getElementById("watermark_size").value =
            decimalValue.toString();

          // Update the auto button style
          document
            .getElementById("size_auto_btn")
            .classList.remove("bg-green-600");
          document.getElementById("size_auto_btn").classList.add("bg-gray-400");

          // Update the preview
          updateWatermarkPreview();
        }

        function setAutoSize() {
          // Set the display value to "Auto"
          document.getElementById("size_value").innerText = "Auto";

          // Set the hidden input to "auto"
          document.getElementById("watermark_size").value = "auto";

          // Update the auto button style
          document
            .getElementById("size_auto_btn")
            .classList.remove("bg-gray-400");
          document
            .getElementById("size_auto_btn")
            .classList.add("bg-green-600");

          // Update the preview
          updateWatermarkPreview();
        }

        function uploadWatermark() {
          const fileInput = document.getElementById("watermark_file_input");
          const statusElem = document.getElementById("watermark_upload_status");

          if (!fileInput.files || fileInput.files.length === 0) {
            statusElem.textContent = "Please select a file first";
            statusElem.className = "text-xs mt-1 text-red-500";
            statusElem.style.display = "block";
            return;
          }

          const file = fileInput.files[0];
          if (!file.type.match("image/(png|jpeg|jpg)")) {
            statusElem.textContent = "Only PNG and JPG/JPEG images are allowed";
            statusElem.className = "text-xs mt-1 text-red-500";
            statusElem.style.display = "block";
            return;
          }

          const formData = new FormData();
          formData.append("watermark_file", file);

          statusElem.textContent = "Uploading...";
          statusElem.className = "text-xs mt-1 text-blue-500";
          statusElem.style.display = "block";

          fetch("/upload_watermark", {
            method: "POST",
            body: formData,
          })
            .then((response) => {
              if (response.ok) {
                statusElem.textContent = "Upload successful! Refreshing...";
                statusElem.className = "text-xs mt-1 text-green-500";
                setTimeout(() => {
                  window.location.reload();
                }, 1000);
              } else {
                statusElem.textContent = "Upload failed. Please try again.";
                statusElem.className = "text-xs mt-1 text-red-500";
              }
            })
            .catch((error) => {
              console.error("Error:", error);
              statusElem.textContent = "Upload failed. Please try again.";
              statusElem.className = "text-xs mt-1 text-red-500";
            });
        }
        function updateWatermarkPreview() {
          // Prevent recursive calls when updating dimensions
          if (window.isUpdatingDimensions) return;

          // Check if watermark is enabled
          const enableWatermark = document.getElementById("enable_watermark");
          if (enableWatermark && !enableWatermark.checked) {
            // If watermark is disabled, don't show anything
            const previewImg = document.getElementById(
              "watermark_preview_image"
            );
            const placeholderText = document.getElementById(
              "preview_placeholder_text"
            );
            const resolutionIndicator = document.getElementById(
              "preview_resolution_indicator"
            );

            previewImg.style.display = "none";
            placeholderText.textContent = "Watermark disabled";
            placeholderText.style.display = "block";
            resolutionIndicator.style.display = "none";

            // Still update container dimensions
            const selectedResolution = document.querySelector(
              'input[name="resolution_type"]:checked'
            ).value;
            window.isUpdatingDimensions = true;
            updatePreviewContainerDimensions(selectedResolution);
            window.isUpdatingDimensions = false;
            return;
          }

          // Toggle custom position controls visibility
          const customPositionRadio = document.getElementById("pos_custom");
          const customPositionControls = document.getElementById(
            "custom_position_controls"
          );
          if (customPositionControls) {
            customPositionControls.style.display =
              customPositionRadio && customPositionRadio.checked
                ? "grid"
                : "none";
          }

          // Get selected watermark
          const watermarkSelect = document.getElementById("watermark_path");
          const selectedWatermark = watermarkSelect.value;

          // Get position
          let selectedPosition = document.querySelector(
            'input[name="watermark_position"]:checked'
          );
          if (!selectedPosition) {
            selectedPosition = { value: "bottom-right" }; // Default if none selected
          }

          // Get opacity
          const opacity = document.getElementById(
            "watermark_opacity_slider"
          ).value;
          // Get size
          const sizeInput = document.getElementById("watermark_size");
          const selectedSize = sizeInput.value;

          // Get selected resolution
          const selectedResolution = document.querySelector(
            'input[name="resolution_type"]:checked'
          ).value;

          // Get container and image elements
          const container = document.getElementById(
            "watermark_preview_container"
          );
          const previewImg = document.getElementById("watermark_preview_image");
          const placeholderText = document.getElementById(
            "preview_placeholder_text"
          );
          const resolutionIndicator = document.getElementById(
            "preview_resolution_indicator"
          );
          // Set container dimensions based on resolution
          if (!window.isUpdatingDimensions) {
            window.isUpdatingDimensions = true;
            updatePreviewContainerDimensions(selectedResolution);
            window.isUpdatingDimensions = false;
          }

          // Load the watermark image
          if (selectedWatermark) {
            // Show the image and set opacity
            previewImg.style.display = "block";
            placeholderText.style.display = "none";
            resolutionIndicator.style.display = "block";
            previewImg.style.opacity = opacity;
            // Only update the source if it's a new image or first load
            if (
              !previewImg.src.includes(selectedWatermark) ||
              previewImg.dataset.initialLoad !== "true"
            ) {
              // Set the src attribute to the watermark path
              previewImg.src = "/" + selectedWatermark;
              previewImg.dataset.initialLoad = "true";
            }

            // Set the position
            previewImg.style.top = "auto";
            previewImg.style.bottom = "auto";
            previewImg.style.left = "auto";
            previewImg.style.right = "auto";
            previewImg.style.transform = "none"; // Reset transformations

            // Get watermark dimensions to calculate proper positioning
            const watermarkWidth =
              previewImg.offsetWidth ||
              container.offsetWidth *
                (selectedSize === "auto"
                  ? 0.2
                  : parseFloat(selectedSize) / 100);
            const containerWidth = container.offsetWidth;
            const containerHeight = container.offsetHeight;

            // Calculate margin based on container size (similar to generate.py logic)
            const marginPx = Math.max(10, containerWidth * 0.025);

            // Position classes - Matching the logic in generate.py
            if (selectedPosition.value === "top-left") {
              previewImg.style.top = marginPx + "px";
              previewImg.style.left = marginPx + "px";
            } else if (selectedPosition.value === "top-center") {
              previewImg.style.top = marginPx + "px";
              previewImg.style.left = "50%";
              previewImg.style.transform = "translateX(-50%)";
            } else if (selectedPosition.value === "top-right") {
              previewImg.style.top = marginPx + "px";
              previewImg.style.right = marginPx + "px";
            } else if (selectedPosition.value === "center-left") {
              previewImg.style.top = "50%";
              previewImg.style.left = marginPx + "px";
              previewImg.style.transform = "translateY(-50%)";
            } else if (selectedPosition.value === "center") {
              previewImg.style.top = "50%";
              previewImg.style.left = "50%";
              previewImg.style.transform = "translate(-50%, -50%)";
            } else if (selectedPosition.value === "center-right") {
              previewImg.style.top = "50%";
              previewImg.style.right = marginPx + "px";
              previewImg.style.transform = "translateY(-50%)";
            } else if (selectedPosition.value === "bottom-left") {
              previewImg.style.bottom = marginPx + "px";
              previewImg.style.left = marginPx + "px";
            } else if (selectedPosition.value === "bottom-center") {
              previewImg.style.bottom = marginPx + "px";
              previewImg.style.left = "50%";
              previewImg.style.transform = "translateX(-50%)";
            } else if (selectedPosition.value === "custom") {
              // Get custom position values from sliders
              const xPos = document.getElementById("custom_pos_x").value;
              const yPos = document.getElementById("custom_pos_y").value;

              // Convert percentage to position that accounts for watermark dimensions
              // This better matches how the actual code in generate.py works
              const xPosPercent = parseFloat(xPos) / 100;
              const yPosPercent = parseFloat(yPos) / 100;

              // Set position - using percentage directly for preview
              previewImg.style.left = xPos + "%";
              previewImg.style.top = yPos + "%";
              previewImg.style.transform = "translate(-50%, -50%)";

              // Update hidden inputs for form submission
              document.getElementById("custom_pos_x_input").value = xPos;
              document.getElementById("custom_pos_y_input").value = yPos;
            } else {
              // Default to bottom-right
              previewImg.style.bottom = marginPx + "px";
              previewImg.style.right = marginPx + "px";
            }

            // Set size based on selection
            if (selectedSize === "auto") {
              previewImg.style.maxWidth = "20%";
            } else {
              // Convert to percentage for display
              let sizePercent;
              if (parseFloat(selectedSize) <= 1) {
                // Handle decimal values (older format 0.05 to 0.5)
                sizePercent = parseFloat(selectedSize) * 100;
              } else {
                // Handle integer percentages (new format 1 to 50)
                sizePercent = parseFloat(selectedSize);
              }
              previewImg.style.maxWidth = sizePercent + "%";
            }
          } else {
            previewImg.style.display = "none";
          }
        }

        // Function to update preview container dimensions based on resolution
        function updatePreviewContainerDimensions(resolutionType) {
          const container = document.getElementById(
            "watermark_preview_container"
          );
          const resolutionIndicator = document.getElementById(
            "preview_resolution_indicator"
          );
          const previewWidth = 356; // Base preview width in pixels
          let previewHeight,
            videoWidth,
            videoHeight,
            aspectRatio,
            containerWidth,
            containerHeight;

          // Set dimensions based on resolution type
          if (resolutionType === "Reel") {
            // Instagram Reel (9:16)
            videoWidth = 1080;
            videoHeight = 1920;
            aspectRatio = 9 / 16; // Portrait (width/height)

            // Set preview container style with fixed width and calculated height
            containerWidth = previewWidth;
            containerHeight = Math.round(previewWidth / aspectRatio);

            container.style.width = containerWidth + "px";
            container.style.height = containerHeight + "px";
            resolutionIndicator.textContent = "Instagram Reel (1080×1920)";
          } else if (resolutionType === "4K_Vertical") {
            // 4K Vertical (9:16)
            videoWidth = 2160;
            videoHeight = 3840;
            aspectRatio = 9 / 16; // Portrait (width/height)

            // Set preview container style
            containerWidth = previewWidth;
            containerHeight = Math.round(previewWidth / aspectRatio);

            container.style.width = containerWidth + "px";
            container.style.height = containerHeight + "px";
            resolutionIndicator.textContent = "4K Vertical (2160×3840)";
          } else {
            // Default 4K (16:9)
            videoWidth = 3840;
            videoHeight = 2160;
            aspectRatio = 16 / 9; // Landscape (width/height)

            // Set preview container style
            containerWidth = previewWidth;
            containerHeight = Math.round(previewWidth / aspectRatio);

            container.style.width = containerWidth + "px";
            container.style.height = containerHeight + "px";
            resolutionIndicator.textContent = "4K (3840×2160)";
          }
          // If we've already loaded a watermark image, update its position after container dimensions change
          // But avoid recursive calls by checking if this was called from updateWatermarkPreview
          if (!window.isUpdatingWatermark) {
            setTimeout(function () {
              const previewImg = document.getElementById(
                "watermark_preview_image"
              );
              if (previewImg && previewImg.style.display !== "none") {
                window.isUpdatingWatermark = true;
                updateWatermarkPreview();
                window.isUpdatingWatermark = false;
              }
            }, 200);
          }
        }

        document.addEventListener("DOMContentLoaded", function () {
          // Initialize watermark options visibility
          toggleWatermarkOptions();

          // Initialize opacity display value
          const opacitySlider = document.getElementById(
            "watermark_opacity_slider"
          );
          if (opacitySlider) {
            updateOpacityValue(opacitySlider.value);
          }

          // Initialize custom position controls visibility
          const customPositionRadio = document.getElementById("pos_custom");
          const customPositionControls = document.getElementById(
            "custom_position_controls"
          );
          if (customPositionControls && customPositionRadio) {
            customPositionControls.style.display = customPositionRadio.checked
              ? "grid"
              : "none";
          }

          // Initialize size value to auto by default
          setAutoSize();

          // Add event listeners to resolution radio buttons
          const resolutionRadios = document.querySelectorAll(
            'input[name="resolution_type"]'
          );
          resolutionRadios.forEach((radio) => {
            radio.addEventListener("change", updateWatermarkPreview);
          });

          // Initialize preview container with current resolution
          const initialResolution = document.querySelector(
            'input[name="resolution_type"]:checked'
          ).value;
          updatePreviewContainerDimensions(initialResolution);

          // Setup event listeners for watermark position options
          const positionRadios = document.querySelectorAll(
            'input[name="watermark_position"]'
          );
          positionRadios.forEach((radio) => {
            radio.addEventListener("change", updateWatermarkPreview);
            
            // Add visual feedback for position selection
            radio.addEventListener("change", function() {
              // Remove active class from all labels
              document.querySelectorAll('input[name="watermark_position"]').forEach(r => {
                r.parentElement.classList.remove('bg-orange-100', 'border-orange-400', 'shadow-sm');
                r.parentElement.classList.add('border-gray-300');
              });
              
              // Add active class to selected label
              if (this.checked) {
                this.parentElement.classList.remove('border-gray-300');
                this.parentElement.classList.add('bg-orange-100', 'border-orange-400', 'shadow-sm');
              }
              
              // Toggle custom position controls visibility
              const customPositionRadio = document.getElementById("pos_custom");
              const customPositionControls = document.getElementById("custom_position_controls");
              if (customPositionControls) {
                customPositionControls.style.display = 
                  customPositionRadio && customPositionRadio.checked ? "grid" : "none";
              }
            });
          });
          // Setup event listener for opacity slider
          if (opacitySlider) {
            opacitySlider.addEventListener("input", function () {
              updateWatermarkPreview();
            });
          }

          // Setup event listener for enable_watermark checkbox
          const enableWatermarkCheckbox =
            document.getElementById("enable_watermark");
          if (enableWatermarkCheckbox) {
            enableWatermarkCheckbox.addEventListener("change", function () {
              updateWatermarkPreview();
            });
          }

          // Initial preview
          setTimeout(updateWatermarkPreview, 500);
        });

        // Initialize the sortable gallery when the document is fully loaded
        document.addEventListener("DOMContentLoaded", function () {
          const gallery = document.getElementById("sortable-gallery");

          if (gallery) {
            // Initialize Sortable
            const sortable = new Sortable(gallery, {
              animation: 150,
              ghostClass: "bg-gray-100", // Ghost class for the item being dragged
              onEnd: function (evt) {
                // When sorting is finished, save the new order
                saveImageOrder();
              },
            });

            // Function to save the new order of images
            function saveImageOrder() {
              // Get all image elements
              const imageElements = document.querySelectorAll(
                "#sortable-gallery > div[data-image]"
              );

              // Create an array of image names in the current order
              const imageOrder = Array.from(imageElements).map(
                (el) => el.dataset.image
              );

              // Send the new order to the server
              fetch("/reorder_images", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  imageOrder: imageOrder,
                }),
              })
                .then((response) => {
                  if (!response.ok) {
                    throw new Error("Failed to save image order");
                  }
                  return response.json();
                })
                .then((data) => {
                  console.log("Order saved successfully:", data);
                })
                .catch((error) => {
                  console.error("Error saving order:", error);
                });
            }
          }
        });        // Enhanced update functions with visual feedback
        function updateFrameRate(value) {
          // Update main display with animation
          const displayElement = document.getElementById('frame_rate_value');
          addUpdateAnimation(displayElement);
          displayElement.textContent = value;
          
          // Update summary display with animation
          const summaryElement = document.getElementById('summary_frame_rate');
          addUpdateAnimation(summaryElement.parentNode);
          summaryElement.textContent = value + ' fps';
          
          // Update final summary as well
          if (document.getElementById('final_frame_rate')) {
            document.getElementById('final_frame_rate').textContent = value + ' fps';
          }
        }
        
        // Update image duration display and summary
        function updateImageDuration(milliseconds) {
          const seconds = (parseInt(milliseconds) / 1000).toFixed(1);
          
          // Update main display with animation
          const displayElement = document.getElementById('image_display_duration_value');
          addUpdateAnimation(displayElement);
          displayElement.textContent = seconds;
          
          // Update summary display with animation
          const summaryElement = document.getElementById('summary_image_duration');
          addUpdateAnimation(summaryElement.parentNode);
          summaryElement.textContent = seconds + ' sec per image';
          
          // Update final summary as well
          if (document.getElementById('final_image_duration')) {
            document.getElementById('final_image_duration').textContent = seconds + ' sec';
          }
        }
        
        // Update transition duration display and summary
        function updateTransitionDuration(value) {
          // Update main display with animation
          const displayElement = document.getElementById('transition_duration_value');
          addUpdateAnimation(displayElement);
          displayElement.textContent = value;
          
          // Update summary display with animation
          const summaryElement = document.getElementById('summary_transition_duration');
          addUpdateAnimation(summaryElement.parentNode);
          summaryElement.textContent = value + ' frames transition';
          
          // Update final summary as well
          if (document.getElementById('final_transition_duration')) {
            document.getElementById('final_transition_duration').textContent = value + ' frames';
          }
        }
        
        // Add subtle animation to an element when its value changes
        function addUpdateAnimation(element) {
          // Remove animation if it's already there
          element.classList.remove('value-updated');
          
          // Trigger reflow
          void element.offsetWidth;
          
          // Add animation class
          element.classList.add('value-updated');
          
          // Remove the class after animation completes
          setTimeout(() => {
            element.classList.remove('value-updated');
          }, 500);
        }
        
        // Legacy function - redirect to new function
        function updateImageDurationDisplay(milliseconds) {
          updateImageDuration(milliseconds);
        }
          // Restore default timing settings
        function restoreDefaultTimingSettings() {
          // Set defaults
          const defaultFrameRate = 60;
          const defaultImageDuration = 1000;
          const defaultTransitionDuration = 60;
          
          // Create a visual "reset" effect with slight delay between each slider
          setTimeout(() => {
            // Update frame rate slider and displays
            document.getElementById('frame_rate_slider').value = defaultFrameRate;
            updateFrameRate(defaultFrameRate);
          }, 0);
          
          setTimeout(() => {
            // Update image duration slider and displays
            document.getElementById('image_display_duration_slider').value = defaultImageDuration;
            updateImageDuration(defaultImageDuration);
          }, 200);
          
          setTimeout(() => {
            // Update transition duration slider and displays
            document.getElementById('transition_duration_slider').value = defaultTransitionDuration;
            updateTransitionDuration(defaultTransitionDuration);
          }, 400);
          
          // Show feedback with enhanced animation
          const summaryBox = document.querySelector('.bg-gradient-to-r.from-blue-50');
          summaryBox.classList.add('pulse-animation');
          
          // Create a toast notification
          showToastNotification('Settings restored to defaults', 'success');
          
          // Remove the animation class after it completes
          setTimeout(() => {
            summaryBox.classList.remove('pulse-animation');
          }, 1000);
        }
        
        // Toast notification function
        function showToastNotification(message, type = 'info') {
          // Create toast element
          const toast = document.createElement('div');
          toast.className = 'fixed bottom-4 right-4 px-4 py-2 rounded-lg shadow-lg text-white font-medium transform transition-all duration-500 flex items-center z-50';
          
          // Set background color based on notification type
          if (type === 'success') {
            toast.classList.add('bg-green-600');
          } else if (type === 'error') {
            toast.classList.add('bg-red-600');
          } else {
            toast.classList.add('bg-blue-600');
          }
          
          // Add icon based on type
          let icon = '';
          if (type === 'success') {
            icon = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 20 20" stroke="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" /></svg>';
          } else if (type === 'error') {
            icon = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 20 20" stroke="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" /></svg>';
          } else {
            icon = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 20 20" stroke="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg>';
          }
          
          toast.innerHTML = icon + message;
          
          // Add to document
          document.body.appendChild(toast);
          
          // Animate in
          setTimeout(() => {
            toast.style.transform = 'translateY(-20px)';
          }, 10);
          
          // Remove after 3 seconds
          setTimeout(() => {
            toast.style.opacity = '0';
            setTimeout(() => {
              document.body.removeChild(toast);
            }, 300);
          }, 3000);
        }
        
        // Initialize timing settings displays
        document.addEventListener("DOMContentLoaded", function() {
          // Initialize the summary values from the current slider values
          const frameRate = document.getElementById('frame_rate_slider').value;
          const imageDuration = document.getElementById('image_display_duration_slider').value;
          const transitionDuration = document.getElementById('transition_duration_slider').value;
          
          // Update summary display
          updateFrameRate(frameRate);
          updateImageDuration(imageDuration);
          updateTransitionDuration(transitionDuration);
          
          // Add event listeners to update summary when sliders are changed
          document.getElementById('frame_rate_slider').addEventListener('change', function() {
            updateFrameRate(this.value);
          });
          document.getElementById('frame_rate_slider').addEventListener('input', function() {
            updateFrameRate(this.value);
          });
          
          document.getElementById('image_display_duration_slider').addEventListener('change', function() {
            updateImageDuration(this.value);
          });
          document.getElementById('image_display_duration_slider').addEventListener('input', function() {
            updateImageDuration(this.value);
          });
          
          document.getElementById('transition_duration_slider').addEventListener('change', function() {
            updateTransitionDuration(this.value);
          });
          document.getElementById('transition_duration_slider').addEventListener('input', function() {
            updateTransitionDuration(this.value);
          });
          
          // Add event listeners for first and last transition selectors
          document.getElementById('first_transition').addEventListener('change', function() {
            // Provide visual feedback when first transition is selected
            const element = this;
            element.classList.add('pulse-animation');
            setTimeout(() => {
              element.classList.remove('pulse-animation');
            }, 1000);
            
            // Update the final summary display
            updateTransitionSummary();
          });
          
          document.getElementById('last_transition').addEventListener('change', function() {
            // Provide visual feedback when last transition is selected
            const element = this;
            element.classList.add('pulse-animation');
            setTimeout(() => {
              element.classList.remove('pulse-animation');
            }, 1000);
            
            // Update the final summary display
            updateTransitionSummary();
          });
          
          // Add event listener for main transition type
          document.getElementById('transition_type').addEventListener('change', function() {
            updateTransitionSummary();
          });
          
          // Add event listener for resolution
          const resolutionRadios = document.querySelectorAll('input[name="resolution_type"]');
          resolutionRadios.forEach(radio => {
            radio.addEventListener('change', function() {
              updateResolutionSummary();
            });
          });
          
          // Initialize final summary display
          updateTransitionSummary();
          updateResolutionSummary();
          updateTimingSummary();
        });
        
        // Function to update transition summary
        function updateTransitionSummary() {
          // Get selected values
          const mainTransition = document.getElementById('transition_type');
          const firstTransition = document.getElementById('first_transition');
          const lastTransition = document.getElementById('last_transition');
          
          // Get selected option texts
          const mainTransitionText = mainTransition.options[mainTransition.selectedIndex].text;
          let firstTransitionText = firstTransition.value ? firstTransition.options[firstTransition.selectedIndex].text : 'Same as Main';
          let lastTransitionText = lastTransition.value ? lastTransition.options[lastTransition.selectedIndex].text : 'Same as Main';
          
          // Update summary display
          document.getElementById('main_transition_summary').textContent = mainTransitionText;
          document.getElementById('first_transition_summary').textContent = firstTransitionText;
          document.getElementById('last_transition_summary').textContent = lastTransitionText;
          
          // Also update timing summary
          updateTimingSummary();
        }
        
        // Function to update resolution summary
        function updateResolutionSummary() {
          const selectedResolution = document.querySelector('input[name="resolution_type"]:checked');
          let resolutionText = '';
          
          if (selectedResolution) {
            switch(selectedResolution.value) {
              case '4K': 
                resolutionText = '4K (3840×2160)';
                break;
              case '4K_Vertical':
                resolutionText = '4K Vertical (2160×3840)';
                break;
              case 'Reel':
                resolutionText = 'Instagram Reel (1080×1920)';
                break;
              default:
                resolutionText = '4K (3840×2160)';
            }
          }
          
          document.getElementById('resolution_summary').textContent = resolutionText;
        }
          // Function to update timing summary
        function updateTimingSummary() {
          const frameRate = document.getElementById('frame_rate_slider').value;
          const imageDuration = document.getElementById('image_display_duration_slider').value;
          const transitionDuration = document.getElementById('transition_duration_slider').value;
          
          document.getElementById('final_frame_rate').textContent = frameRate + ' fps';
          document.getElementById('final_image_duration').textContent = (parseInt(imageDuration) / 1000).toFixed(1) + ' sec';
          document.getElementById('final_transition_duration').textContent = transitionDuration + ' frames';        }
      </script>
    </div>
  </body>
</html>
